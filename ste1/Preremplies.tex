\documentclass[10pt,a4paper]{article}
\usepackage[a4paper, margin=2cm]{geometry}
\usepackage{needspace}
\usepackage[nobottomtitles]{titlesec}
\usepackage{multicol}
\usepackage{xcolor}
\usepackage{fp}
\usepackage{xfp}
\usepackage{enumitem}
\usepackage[version=4]{mhchem}
\usepackage{WriteOnGrid}
\usepackage{frcursive}
\usepackage{csvsimple}%
\usepackage[francais,bloc]{automultiplechoice}

\FPseed=10

\baremeDefautS{e=0,v=0,b=1,m=-.1}
\baremeDefautM{e=0,v=0,b=.5,m=-.1}

\graphicspath{ {./images/} }

\newenvironment{reponsesd}{
    \begin{multicols}{2}
    \begin{reponses} }{
    \end{reponses}
    \end{multicols}
}

\setlength{\columnseprule}{1pt}
\def\columnseprulecolor{\color{lightgray}}%

\let\oexplain\explain
\renewcommand{\explain}[1]{\oexplain{\textcolor{red}{#1}}}

\titleformat{\section}
  {\centering\hrule\vspace{2mm}}
  {\thesection}
  {1em}
  {}
  [\vspace{1mm}\hrule]

\titleformat{\subsection}
  {\em}
  {\thesubsection}
  {1em}
  {}

\newcommand{\sujet}{
\exemplaire{1}{%

\AMCsetFoot{\niveau{} \classe{} -- \prenom{}~\nom{} -- \thepage}

%%% debut de l'en-tête des copies :
\begin{center}
\vfill
\noindent{\large \bf Classe de \niveau{}°\classe{}}

\vspace*{3mm}

{\Large\bf Évaluation de compétences (non notée) STL - Physique-Chime 15/10/2025}

\vfill
\namefield{\noindent{}\fbox{\vspace*{3mm}
         \Huge\bf\prenom{}~\nom{}\normalsize{}%
         \vspace*{3mm}
      }}
\end{center}
\vfill

\begin{center}
\textbf{Durée : 30 minutes.}
\vspace*{5mm}

  Aucun document n'est autorisé.
  L'usage de la calculatrice est interdit.

  Les questions faisant apparaitre le symbole \multiSymbole{} peuvent
  présenter une ou plusieurs bonnes réponses. Les autres ont
  une unique bonne réponse.

  {\color{white} Des points négatifs seront affectés aux mauvaises réponses.}
  \vspace*{5mm}

  \textbf{IMPORTANT: Utilisez un crayon de papier bien noir pour cocher les cases, et une gomme pour effacer délicatement en cas d'erreur. Ne raturez pas les cases. Si vous effacez le pourtour de la case, ne le redessinez pas!}

  \vspace*{5mm}

  Ne pas faire comme ceci (pas centré, trop pâle, raturé):\\
  \includegraphics[width=4cm]{checkbox_bad.png}

  Mais comme cela (bien centré, bien foncé):\\
  \includegraphics[width=2cm]{checkbox_good.png}

  Si vous faites une erreur et que vous ne pouvez effacer, raturez la case bien ostensiblement.

\end{center}
\vspace{1ex}
\vfill
\pagebreak
%%% fin de l'en-tête

\restituegroupe{groupes}


\AMCassociation{\id}

	  } % End \exemplaire{1}{%
} % End \newcommand{\sujet}{


%%%%§§§§§§§§§§§§§§§§§§§§§§§§§§§§§§§§§
\newcommand{\allq}{}
\newcommand{\nball}[1]{#1}

\newcommand{\metaq}[2]{
\element{#1}{%
\begin{question}{#1 a}\QuestionIndicative
  \needspace{2cm}
  Vous sentez-vous à l'aise en #2~?
  \begin{reponseshoriz}[o]
    \bonne{Non}
    \bonne{Pas trop}
    \bonne{Moyen}
    \bonne{Plutôt bien}
    \bonne{Oui}
  \end{reponseshoriz}
  \explain{C'est votre choix.}
\end{question}
}}


\begin{document}
%%%Options
\AMCrandomseed{10}

\def\AMCformQuestion#1{{\sc Question #1 :}}

\setdefaultgroupmode{withoutreplacement}
%%% Fin Options

%%% elements

\input{q_meta.tex}
\input{q_strspc.tex}
\input{q_nec.tex}
\input{q_acide.tex}
\input{q_tpco.tex}
\input{q_redox.tex}
\input{q_cichi.tex}
\input{q_radio.tex}
\input{q_motion.tex}
\input{q_energ.tex}
\input{q_meca.tex}
\input{q_echi.tex}
\input{q_elect.tex}
\input{q_elum.tex}


\metaq{mstr}{stéréochimie}
\metaq{macid}{réactions acides-basiques}
\metaq{mredox}{réactions d'oxydoréduction}
\metaq{mcichi}{cinétique chimique}
\metaq{mradio}{radioactivité}
\metaq{mmotion}{mécanique du point}
\metaq{menerg}{énergie}
\metaq{mmeca}{énergie mécanique}
\metaq{mechi}{énergie chimique}
\metaq{melect}{énergie electrique}
\metaq{melum}{énergie lumineuse}

%\setgroupmode{strspc}{withoutreplacement}
%%%% fin des elements

\element{groupes}{
\section{Méta}
\begin{multicols}{2}
\restituegroupe{meta}
\end{multicols}

\section{Structures spatiales des espèces chimiques}
\restituegroupe{mstr}

\begin{multicols}{2}
\insertgroup[2]{strspc}
\insertgroup[2]{nec}
\end{multicols}

\section{Réactions acides-basiques}
\restituegroupe{macid}

\begin{multicols}{2}
\insertgroup[2]{acide}
\insertgroup[2]{tpco}
\end{multicols}

\section{Réactions d'oxydoréduction}
\restituegroupe{mredox}

\begin{multicols}{2}
\insertgroup[2]{redox}
\end{multicols}

\section{Cinétique chimique}
\restituegroupe{mcichi}

\begin{multicols}{2}
\insertgroup[2]{cichi}
\end{multicols}

%\pagebreak
\clearpage
\section{Radioactivité}
\restituegroupe{mradio}

\begin{multicols}{2}
\insertgroup[2]{radio}
\end{multicols}

\section{Mécanique du point}
\restituegroupe{mmotion}

\begin{multicols}{2}
\insertgroup[2]{motion}
\end{multicols}

%\pagebreak
\clearpage
\section{Énergie~: conversion et transfers}
\restituegroupe{menerg}
\begin{multicols}{2}
\insertgroup[2]{energ}
\end{multicols}

\section{Énergie mécanique}
\restituegroupe{mmeca}

\begin{multicols}{2}
\insertgroup[2]{meca}
\end{multicols}

\section{Énergie chimique}
\restituegroupe{mechi}

\begin{multicols}{2}
\insertgroup[2]{echi}
\end{multicols}

\section{Énergie electrique}
\restituegroupe{melect}

\begin{multicols}{2}
\insertgroup[2]{elect}
\end{multicols}

%\pagebreak

\clearpage
\section{Énergie et ondes}
\restituegroupe{melum}

\begin{multicols}{2}
\insertgroup[2]{elum}
\end{multicols}

\AMCcleardoublepage
}

\csvreader[head to column names]{liste.csv}{}{\sujet}

\end{document}
