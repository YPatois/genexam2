\documentclass[10pt,a4paper]{article}
\usepackage{needspace}
\usepackage[nobottomtitles]{titlesec}
\usepackage{multicol}
\usepackage{xcolor}
\usepackage{fp}
\usepackage{xfp}
\usepackage{enumitem}
\usepackage[version=4]{mhchem}
\usepackage{WriteOnGrid}
\usepackage{frcursive}
\usepackage{csvsimple}%
\usepackage[francais,bloc]{automultiplechoice}

\FPseed=10

\baremeDefautS{e=0,v=0,b=1,m=-.1}
\baremeDefautM{e=0,v=0,b=.5,m=-.1}

\graphicspath{ {./images/} }

\newenvironment{reponsesd}{
    \begin{multicols}{2}
    \begin{reponses} }{
    \end{reponses}
    \end{multicols}
}

\setlength{\columnseprule}{1pt}
\def\columnseprulecolor{\color{lightgray}}%

\let\oexplain\explain
\renewcommand{\explain}[1]{\oexplain{\textcolor{red}{#1}}}

\titleformat{\section}
  {\centering\hrule\vspace{2mm}}
  {\thesection}
  {1em}
  {}
  [\vspace{1mm}\hrule]

\titleformat{\subsection}
  {\em}
  {\thesubsection}
  {1em}
  {}

\newcommand{\sujet}{
\exemplaire{1}{%

\AMCsetFoot{\niveau{} \classe{} -- \prenom{}~\nom{} -- \thepage}

%%% debut de l'en-tête des copies :
\begin{center}
\vfill
\noindent{\large \bf Classe de \niveau{}°\classe{}}

\vspace*{3mm}

{\Large\bf Évaluation de compétences (non notée) STL - Physique-Chime 15/10/2025}

\vfill
\namefield{\noindent{}\fbox{\vspace*{3mm}
         \Huge\bf\prenom{}~\nom{}\normalsize{}%
         \vspace*{3mm}
      }}
\end{center}
\vfill

\begin{center}
\textbf{Durée : 30 minutes.}
\vspace*{5mm}

  Aucun document n'est autorisé.
  L'usage de la calculatrice est interdit.

  Les questions faisant apparaitre le symbole \multiSymbole{} peuvent
  présenter une ou plusieurs bonnes réponses. Les autres ont
  une unique bonne réponse.

  {\color{white} Des points négatifs seront affectés aux mauvaises réponses.}
  \vspace*{5mm}

  \textbf{IMPORTANT: Utilisez un crayon de papier bien noir pour cocher les cases, et une gomme pour effacer délicatement en cas d'erreur. Ne raturez pas les cases. Si vous effacez le pourtour de la case, ne le redessinez pas!}

  \vspace*{5mm}

  Ne pas faire comme ceci (pas centré, trop pâle, raturé):\\
  \includegraphics[width=4cm]{checkbox_bad.png}

  Mais comme cela (bien centré, bien foncé):\\
  \includegraphics[width=2cm]{checkbox_good.png}

  Si vous faites une erreur et que vous ne pouvez effacer, raturez la case bien ostensiblement.

\end{center}
\vspace{1ex}
\vfill
\pagebreak
%%% fin de l'en-tête

\restituegroupe{groupes}


\AMCassociation{\id}

	  } % End \exemplaire{1}{%
} % End \newcommand{\sujet}{


%%%%§§§§§§§§§§§§§§§§§§§§§§§§§§§§§§§§§
\newcommand{\allq}{}
\newcommand{\nball}[1]{#1}

\begin{document}
%%%Options
\AMCrandomseed{10}

\def\AMCformQuestion#1{{\sc Question #1 :}}

\setdefaultgroupmode{withoutreplacement}
%%% Fin Options

%%% elements

\input{q_meta.tex}
\input{q_strspc.tex}
\input{q_nec.tex}
\input{q_acide.tex}
\input{q_tpco.tex}
\input{q_redox.tex}
\input{q_cichi.tex}
\input{q_radio.tex}
\input{q_motion.tex}
\input{q_energ.tex}
\input{q_elect.tex}
%\setgroupmode{strspc}{withoutreplacement}
%%%% fin des elements

\element{groupes}{
\section{Méta}
\begin{multicols}{2}
\restituegroupe{meta}
\end{multicols}

\section{Structures spatiales des espèces chimiques}
\begin{multicols}{2}
\insertgroup[2]{strspc}
\insertgroup[2]{nec}
\end{multicols}

\section{Réactions acides-basiques}
\begin{multicols}{2}
\insertgroup[2]{acide}
\insertgroup[2]{tpco}
\end{multicols}

\section{Réactions d'oxydoréduction}
\begin{multicols}{2}
\insertgroup[4]{redox}
\end{multicols}

\section{Cinétique chimique}
\begin{multicols}{2}
\insertgroup[2]{cichi}
\end{multicols}

\section{Radioactivité}
\begin{multicols}{2}
\insertgroup[2]{radio}
\end{multicols}

\section{Mouvements et interactions}
\begin{multicols}{2}
\insertgroup[4]{motion}
\end{multicols}

\section{Énergie~: conversion et transfers}
\begin{multicols}{2}
\insertgroup[2]{energ}
\insertgroup[2]{elect}
\end{multicols}

\AMCcleardoublepage
}

\csvreader[head to column names]{liste.csv}{}{\sujet}

\end{document}
